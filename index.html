
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>David Souther</title>
  <meta name="author" content="David Souther <davidsouther@gmail.com>">

  
  <meta name="description" content="&ldquo;With enough eyeballs, all bugs are shallow.&rdquo; The bug might be shallow when it&rsquo;s first found, but how does it never happen again? &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://DavidSouther.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/feed.xml" rel="alternate" title="David Souther" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-505666-4']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">David Souther</a></h1>
  
    <h2>Crafstmanship - Software, Hardware, Art, Language</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/feed.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:DavidSouther.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2013/10/30/testing-its-hard-just-do-it/">Testing. It&#8217;s Hard. Just Do It!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-10-30T13:31:11-04:00" pubdate data-updated="true">Oct 30<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://en.wikipedia.org/wiki/Linus's_Law">&ldquo;With enough eyeballs, all bugs are shallow.&rdquo;</a></p>

<p>The bug might be shallow when it&rsquo;s first found, but how does it never happen again? Automated Testing. When a bug is found, prove it exists with a test. Then, that bug is guaranteed to never happen again &ndash; a little computer gremlin with eagle-eye focus will look at that bug every time your program runs, and the bug will NEVER HAPPEN AGAIN. It will never happen, because if you come close to making that bug, the gremlin will make your console bleed with the red of a failed test.</p>

<blockquote><p>&ldquo;The three chief virtues of a programmer are: Laziness, Impatience and Hubris.&rdquo;
&ndash; Larry Wall (creator of Perl)</p></blockquote>

<p>That little gremlin I wrote to prove the (non)existence of a bug? That&rsquo;s me being lazy. I have absolutely zero desire to fix a bug a second time &ndash; that&rsquo;s time I could be playing ping pong, or writing a new operating system. That little gremlin better be fast, too, or I&rsquo;m not going to wait around for him. The gremlin must be small and focused, with a family of small, focused gremlins that can run all my critical tests (the features I&rsquo;m touching) in under 5 seconds, and my entire codebase quickly enough to not block anyone else on my team (<a href="http://codeascraft.com/2013/09/23/lxc-running-14000-tests-per-day-and-beyond-part-1/">or they will not test, because it takes too long to be useful</a>). My code always works correctly, the first time. At least, it does every time I write a test before I write a feature. I know most developers aren&rsquo;t as egotistical as I am, but I don&rsquo;t know a single good developer who doesn&rsquo;t want to take pride in the code they&rsquo;ve written. It&rsquo;s damned easy to take pride in code that Works Right.</p>

<h2>Why don&rsquo;t I test more often?</h2>

<p><img src="https://lh3.googleusercontent.com/OkcCl_KVOvD6J7q4w_mWsgvj01mc_3jqS_fKcKIZbJDqq5HMCoPE0J2fnJld_XA9Zxs21XSH429Rnwk9V-T_MHB19-Wk090pYtvHD0pGOUdf_QKls6HXaX-dUA" alt="" /></p>

<p>Testing is hard. It&rsquo;s not the way most programmers learned to program. The other side of the laziness sword? If it&rsquo;s easier to take a shortcut, to get code out the door, I probably will. Testing is in many cases as hard as writing production code, but for a completely different reason: testing requires discipline. Discipline is not, in my experience, something prided by the great hackers of our field. It is a completely different way to approach building software, and requires an equal level of commitment and experience to become comfortable for a developer or team. Without that discipline, shortcuts will happen, and developers won&rsquo;t write code.</p>

<p>Three things need to happen when a team gets to that point. The tests need to be easier to write. This is half experience and half toolkit &ndash; the test suite must be fast to run and easy to add tests, and I personally need to be familiar enough with the testing library to write the tests. The test suite must run, and pass, before any code is allowed out the door (coverage testing will guarantee a level of certainty that tests have indeed been written). The third and equally critical piece is support from the project&rsquo;s leadership. If the leadership of the team allows developers to slide and be (bad) lazy, testing will slip.</p>

<h3>Metaphorical Interlude</h3>

<pre>
           Drawing from a well,

       Deep and full and crystal clear.

         A ratchet won't slip.
</pre>


<p><img src="https://lh4.googleusercontent.com/4dgJC56kg--PvW2NHWSTtKr6H0RbQHFAi4pKitQOyUhOBT0KgAyX_Yau1efUdBnI4USrPk63-KEBB9Twrd-yRK8nN_yevJLYOpOullHdpi0hmpdHQgblbjwQYw" alt="" />Programming is like drawing water from a well. When the well is shallow, and the bucket small, it&rsquo;s not too difficult a task. When the bucket is big, and the well deep, it becomes harder to draw the bucket, and every mistake can be more disastrous. Automated testing is like installing a ratchet on the rope &ndash; every time you write tested code, that bit of rope will never slip. Embracing test driven development is installing a pulley to hoist the bucket with the program. The force and exertion to write a feature halves, because you only write the actual half of the feature the customer needs.</p>

<h2>Excoriation of Excuses</h2>

<p>If you&rsquo;re a programmer and you don&rsquo;t write tests, I&rsquo;m going to assume you don&rsquo;t care enough about your code. I&rsquo;m going to assume that the code you&rsquo;re working on, you&rsquo;re fine with it being 80%. I&rsquo;m going to assume you are smarter than me, in a bad way. I am not smart enough to know whether I did or did not break the code you wrote, if I don&rsquo;t have a test suite that tells me if I broke it or not. I am probably not going to want to work on your project or component. I say this not because I think less of you, or want to belittle you, but because this is as much a wake-up call to myself. I say this to myself when I visit old code of my own, that I wrote without tests. It is disgusting and reprehensible to visit those code bases, and I have no desire to return to those projects, no matter how well intentioned they were.</p>

<p>If you&rsquo;re a manager and don&rsquo;t demand your team writes tests, I&rsquo;m going to assume you&rsquo;re penny-wise and pound-foolish. If your project is doing well now, I will put money on it collapsing with a bit of churn in your team. After about a quarter of your team has moved on or been replaced, your codebase will collapse into a mess of hard to find bugs, weird edge cases, and increasingly continued pressure to deliver new features when your team is simply unable to write a line of code that doesn&rsquo;t unexpectedly change behavior elsewhere in the application. I will not volunteer for your team. Similarly, if I ever find myself leading a team in such a position, I would be incredibly reticent to hire a developer willing to work in my environment. (Unless, of course, I am being hired or hiring a <a href="https://www.google.com/about/jobs/search/#!t=jo&amp;jid=35182&amp;">Software Engineer in Test</a> specifically to fix these testing deficiencies.)</p>

<h2>Prototypes, Too!</h2>

<p><a href="http://davidsouther.com/wp-content/uploads/2013/10/post-10513-Code-Refactoring-Cat-in-Bathtu-yRZT.gif"><img src="http://davidsouther.com/wp-content/uploads/2013/10/post-10513-Code-Refactoring-Cat-in-Bathtu-yRZT.gif" alt="Evils of the Refactoring Cat" /></a>I reject the concept of one-off code. If you&rsquo;re at a hackathon, there is that point, about three hours before demo, where your project is AWESOME, and going to win best of show, but you have three hours so you might as well implement a new feature. Without tests, your demo will fail. You will accidentally, in the heat of the moment, break the old, MVP feature with that whiz-bang animation, and have no idea how to get back. At best, you will have a commit to roll back to. At worst, your hackathon time was ruined. With a prototype, you are trying to convince someone to go out of their way to do you a favor. Don&rsquo;t play the lottery &ndash; write tests.</p>

<h2>Call to Action</h2>

<p>At this point, it should be pretty clear I care, very deeply, about code and code quality. I want to use good software, and I want to write good software. Help me! If you write code, find a way to test! Challenge me! Don&rsquo;t let me off the hook when testing gets hard, and I won&rsquo;t let you! Together we can craft better software!</p>

<h3>Some resources for getting on the testing train:</h3>

<ul>
<li><a href="http://www.codinghorror.com/blog/2006/07/i-pity-the-fool-who-doesnt-write-unit-tests.html">I Pity the Fool</a></li>
<li><a href="http://www.amazon.com/exec/obidos/ISBN=0131177052/portlandpatternrA/">Working Effectively with Legacy Code</a> &ndash; <a href="http://www.objectmentor.com/resources/articles/WorkingEffectivelyWithLegacyCode.pdf">Intro PDF</a></li>
<li><a href="http://msdn.microsoft.com/en-us/magazine/gg655487.aspx">Unit Testing 101: Are you testing your javascript?</a></li>
<li><a href="http://www.obeythetestinggoat.com/">Obey the Testing Goat</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2013/04/25/sitting-at-home/">Sitting at Home, Listening to Beethoven, Thinking of Maenee</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-25T22:37:22-04:00" pubdate data-updated="true">Apr 25<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><pre>
The fire in your eyes sets my heart aflame

the spark that lights the tinder in my soul
which, bereft of the waters of love, dried
but did not blow away. Waiting,
instead, to flame up, 'till, engulfed with passion,
the detritus burned away leaving
fertile fields to sow the tears of your beauty.

Nurtured by the passions of our love,
tended by the tender touch we share,
blooming in a garden we share
in my breast, my mind.
</pre>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2013/03/18/national-gallery-west-building/">National Gallery, West Building</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-18T11:51:56-04:00" pubdate data-updated="true">Mar 18<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><pre>
Art in the halls art on the walls
Paintings and sculpture oh my 
A Garden inside to read if you will
Galleries filled for the eyes

An Ancient Pine forest with a mountain stream 
Serene to behold, even without green
That babbling Brook flows strong in winter 
The beauty of Swiss caught with watercolor 
(Alexandre calame 1847)

Hippolyte Petitjean dimples so tight 
Her watercolors still capture light 
Sedative scenes made of single points 
Each lovingly placed with a deft touch 
(promenade by a lake, a river landscape, etc)

Fishing boats tossed before a storm 
Isabey throws the paint ashore 
The fishermen cower 'fore nature's roar 
Yet ride it through in courageous form 
(1840)

Degas, Rodin! Their sculptures show 
Humanity in all our throws 
Romantic: grotesque 
Or plump, yet true?

Hunting in the Pontine Marches 
Mighty Oaks felled low as passing time
The moment captures rifle's aim
The Hound, faithful, pointing, leaves impression
(Horace Vernet, 1833)

People move through 
some with opinions, Others thoughts 
One in a few, even appreciation 
The creations of peers moving them so

Too much to see in a day or a life,
so we pick and we choose
what fancies delights;
then, at the end, the cherubs alight.
</pre>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2013/03/14/7th-ave-between-the-square-and-the-park/">7th Ave Between the Square and the Park</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-14T21:03:09-04:00" pubdate data-updated="true">Mar 14<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><pre>
I walk her streets alone, awake;
I walk her streets with friends.
Alive we feel some million folks
enjoying her embrace.

Her lights are bright,
yet throw shadows
enough in length to hide
where sounds abound, yet lie.

Her grids ensnare
whom drives across.
"Go below" her whisper,
strong but soft.

Then a whoosh and a rattle
goes her train!
The clank crescendo
from her veins!

A honk, a squeal! The rubber grips
while I on foot move apace,
Hundreds, thousands, also walk
free from the bonds of oil to race.

The buildings are tall, her skin.
Steel and concrete, for those within
to sit above and look upon
her lustrous fair visage.

Green still is found near every where.
Her parks day and night for lovers wait.
The squirrels beg, the rats grow fat.
And pigeons? Crap on your hat.

Her shops will sell most anything.
"What Price" you ask without a tag.
Her people though surprise you so,
"It's my gift, you need it more."

Of course with millions all around
Some less savory can be found.
"What Price" you ask without a fare-
less pleasant a night you're not aware.

She is a bitch, when she wants to be.
Abusive, yes, but then, so welcoming.
Keep your wits, and love her too.
She will always be with you.
</pre>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2013/02/25/readable-d3/">Readable D3</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-02-25T22:26:58-05:00" pubdate data-updated="true">Feb 25<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="https://github.com/mbostock/d3/wiki/Gallery">d3 example code</a> is horribly convoluted, depending on dozens of unstructured variables (and often some global magic) to achieve even the simplest effects. To improve the readability of my d3 projects, I&rsquo;ve introduced a Canvas container, with the most commonly used properties conveniently encapsulated in a single object. Combined with mbostocks discussion in <a href="http://bost.ocks.org/mike/chart/">Towards Reusable Charts</a>, the canvas container can be used in nearly any project to greatly improve the structure and quality of d3 code.</p>

<div><script src='https://gist.github.com/5035560.js?file=canvas.js'></script>
<noscript><pre><code>(function(){
  /*
    Get a new SVG canvas, with margins and scales. Pass an object as `options` to
    set values. Defaults:
  
    {
      size: # Size of SVG. Returned size will be smaller by the size of the margins.
        width: 960
        height: 500
      margin: # Margins for the graphic.
        top: 20
        right: 20
        bottom: 30
        left: 40
      scale: # d3.scales to scale against the canvas
        x: linear
        y: linear
      domain: # Domain of scales for the canvas.
        x: [0, 1]
        y: [0, 1]
    }

    @param root String selector for finding the SVG element.
    @param options Object matching the defaults to override.
    @return Object with defaults, overriden by the options, and an additional two properties:
      {
        svg: SVG_Element # SVG root
        defs: SVG_Defs_Element # &lt;defs&gt; to attach gradient and filter definitions to.
      }
  */
  this.Canvas = function(root, options){
    var margin, width, height, svg, scales, canvas;
    root == null &amp;&amp; (root = 'body');
    options == null &amp;&amp; (options = {});
    options.size || (options.size = {});
    options.margin || (options.margin = {});
    options.scale || (options.scale = {});
    margin = {
      top: options.margin.top || 20,
      right: options.margin.top || 20,
      bottom: options.margin.top || 30,
      left: options.margin.top || 40
    };
    margin.leftright = margin.left + margin.right;
    margin.topbottom = margin.top + margin.bottom;
    width = (options.size.width || 960) - margin.leftright;
    height = (options.size.height || 500) - margin.topbottom;
    svg = d3.select(root).attr({
      'width': width + margin.left + margin.right,
      'height': height + margin.top + margin.bottom
    });
    scales = {
      x: d3.scale[options.scale.x || 'linear']().range([0, width]).domain(options.domain.x || [0, 1]).nice(),
      y: d3.scale[options.scale.y || 'linear']().range([0, height]).domain(options.domain.y || [0, 1]).nice()
    };
    canvas = {
      size: {
        width: width,
        height: height
      },
      margin: margin,
      scale: scales,
      svg: svg,
      defs: svg.select('defs')
    };
    return canvas;
  };
}).call(this);
</code></pre></noscript></div>


<p>This version binds the Canvas closure function to Window. Most of the code is to ensure the appropriate fields are set on the options object. The returned object has the final details of the drawing surface, including its size, the margins, and d3 scales calibrated to the canvas&#8217; coordinates. It also includes a refernce to the root SVG element, as well as the svg:defs element containing any filters or gradients defined for the image.</p>

<p>This object works exceptionally well as the config parameter for reusable charts.</p>

<div><script src='https://gist.github.com/5035560.js?file=starmap.js'></script>
<noscript><pre><code>(function(){
  var spectrate, Starmap, prepare;

  // Small helper to look up a string
  spectrate = function(star){
    return &quot;class&quot; + spectral['class'](+star.temp);
  };

  // Given a canvas, add gradient definitions to the svg:defs element.
  prepare = function(canvas){
    var defs, grads;
    defs = canvas.defs;
    grads = defs.selectAll('radialGradient')
      // A list of spectral classes
      .data(spectral.spectro)
      .enter()
      .append('svg:radialGradient')
      .attr({
        'id': function(it){ return spectrate(it); },
        'cx': +0.5,
        'cy': +0.5,
        'r': +1
      });
    grads.append('stop')
      .attr({
        'stop-color': function(it){ return it.color.brighter(); },
        'offset', '0%'
      });
    grads.append('stop')
      .attr({
        'stop-color': function(it){ return it.color; },
        'offset': '100%'
      });
  };

  this.Starmap = function(canvas){
    var star;
    prepare(canvas);

    // Callable function to draw circles in a selection
    // EG a stencil
    star = function(selection){
      var circles;
      circles = selection.enter()
        .append('svg:circle')
        .attr({
          &quot;r&quot;: 20,
          &quot;class&quot;: &quot;star&quot;
        })
        .style({
          &quot;opacity&quot;: 0.9
        });
      circles.attr({
        &quot;cx&quot;: function(it){ return canvas.scale.x(+it.temp); },
        &quot;cy&quot;: function(it){ return canvas.scale.y(+it.mag); },
        &quot;fill&quot;: function(it){ return &quot;url(#&quot; + spectrate(it) + &quot;)&quot;; }
      });
      selection.exit().remove();
    };

    // The main stencil. Takes an svg:g layer from inside canvas.svg
    return function(layer){
      // Load the spectrum data
      d3.csv(&quot;hr.csv&quot;, function(error, stars){
        layer.attr({
            'id': &quot;herzrus&quot;,
            'transform': &quot;translate(&quot; + canvas.margin.left + &quot;, &quot; + canvas.margin.right + &quot;)&quot;
          })
          .style('opacity', 0.9)
          .selectAll('.star')
          .data(stars)
          // Chained call to the reusable star stencil.
          .call(star);
      });
    };
  });
}).call(this);
</code></pre></noscript></div>


<p>In this example, StarMap will draw a Herzsprung Russel diagram on the layer. An HR diagram is a log-linear scatterplot of stellar temperature to luminosity. This example takes a canvas to attach Gradient definitions to, and returns a function that will draw the HR diagram on a layer. The stencil function loads data from a CSV file, and uses an inner stencil funtion to draw the individual stars.</p>

<p>Using the two is similarly easy.</p>

<div><script src='https://gist.github.com/5035560.js?file=starmap.html'></script>
<noscript><pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;HR in D3&lt;/title&gt;
    &lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot; /&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;styles/nucleosynth.css&quot;&gt;
    &lt;script src=&quot;canvas.js&quot; /&gt;
    &lt;script src=&quot;starmap.js&quot; /&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;svg id=&quot;chart&quot;&gt;
        &lt;defs&gt;
            &lt;filter id=&quot;oil&quot; filterUnits=&quot;objectBoundingBox&quot; x=&quot;0%&quot; y=&quot;0%&quot; width=&quot;100%&quot; height=&quot;100%&quot;&gt;
                &lt;femorphology in=&quot;SourceGraphic&quot; radius=&quot;2&quot; result=&quot;result_oil_morph&quot; /&gt;
                &lt;feturbulence type=&quot;turbulence&quot; baseFrequency=&quot;0.05&quot; numOctaves=&quot;2&quot; result=&quot;result_oil_turb&quot; /&gt;
                &lt;fedisplacementmap in=&quot;result_oil_morph&quot; in2=&quot;result_oil_turb&quot; scale=4 xChannelSelector=&quot;R&quot; yChannelSelector=&quot;G&quot; /&gt;
            &lt;/filter&gt;
        &lt;/defs&gt;
    &lt;/svg&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
        var background;
        canvas = Canvas('#chart', {
            scale: {
                x: 'log'
            },
            domain: {
                x: [100000, 1000],
                y: [-8, 7]
            }
        });
        background = canvas.svg.append('svg:g')
            .attr('style', 'filter:url(#oil);');
        background.append('svg:image')
            .attr({
                'xlink:href': &quot;assets/dfb.png&quot;,
                'width': canvas.size.width + canvas.margin.leftright,
                'height': canvas.size.height + canvas.margin.topbottom,
                'x': 0,
                'y': 0
            });
        Starmap(canvas)(background.append('svg:g'));
    &lt;/script&gt;
&lt;/body&gt;
</code></pre></noscript></div>


<p>In this example, the SVG is preloaded in the HTML with a filter already defined. The script gets a canvas with a few custom properties, attaches a background image, then creates the Starmap and uses it immediately.</p>

<p>This pattern has been very helpful keeping my code clean.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2013/01/11/this-rationalists-world-view/">This Rationalist&#8217;s World-View</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-01-11T00:32:51-05:00" pubdate data-updated="true">Jan 11<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The myriad parameters to support human life are nearly all emergent.</p>

<p>Look out in the night sky. How many stars do you see? (In the suburbs, maybe 2000). How many of those are actually galaxies? About a dozen. How many planets can you see? 5. How many stars do our telescopes see, <a href="https://www.google.com/search?q=stars%20in%20the%20milky%20way&amp;aq=f&amp;oq=stars%20in%20the%20&amp;aqs=chrome.0.59j0j57j5j61j60.2058&amp;sugexp=chrome,mod=0&amp;sourceid=chrome&amp;ie=UTF-8">in the Milky Way</a>? 300 billion. <a href="https://www.google.com/search?q=galaxies%20in%20the%20universe&amp;aq=0&amp;oq=Galaxies%20in%20the%20uni&amp;aqs=chrome.2.57j5j0l2j62l2.2777&amp;sugexp=chrome,mod=0&amp;sourceid=chrome&amp;ie=UTF-8">Galaxies</a>? 170 billion. Planets? Nearly 1000 confirmed (ok, only a dozen or so extra solar have been directly imaged) and another 2,000 awaiting data analysis, and we are literally just getting started. The latest analysis estimates 100 billion planets in the milky way (one every three stars, but more like 3 &ndash; 5 every 10 stars, given the way planetary systems form). 17 billion or so of those are <a href="http://www.slate.com/blogs/bad_astronomy/2013/01/07/alien_earths_new_study_indicates_there_are_billions_of_earth_sized_planets.html">probably Earth-like</a> (rocky, with masses between Mars and ~1.5x Earth).</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2013/01/11/this-rationalists-world-view/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2012/12/07/observers-in-my-syntax/">Observers? In *my* Syntax?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-07T10:13:24-05:00" pubdate data-updated="true">Dec 7<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Modern graphical programming is dependent on the <a href="http://en.wikipedia.org/wiki/Observer_pattern">observer pattern</a>. Its use in Model-View-Controller architectures vaulted the pattern into widespread use. Its continues to find applicability in event and interrupt based systems. The underlying conceptual pattern is astounding. In traditional APIs, the user is allowed to call library code arbitrarily, but there is no mechanism for a library to call user space code. While this is somewhat obviated by extensive callback usage, having formally defined and documented locations where library code calls user code is a great boon in large-scale software architectures. The observer pattern provides such a mechanism. In short, observers are great. How can they be worked even tighter into a coding environment?</p>

<p>This past year has seen an abundance of metamorphic languages targeting JavaScript. <a href="http://gkz.github.com/LiveScript/">LiveScript</a> especially has added a glut of incredibly useful syntax to CoffeeScript, borrowing heavily from Haskell. These improvements capture, in concise syntax, a myriad of concepts that normally take many lines of code. Users of the LiveScript language have access to functional currying, piping, backcalls, and dozens of other operations resulting in less typing and more straightforward programs. The results of these symbols occur in a myriad of ways- some are converted into appropriate JavaScript, while others are handled by introducing hidden functions to introduce the new features. The two mechanisms both work well and in tandem, allowing nearly any combination of additional language features.</p>

<p>I would like to add a series of operations for handling observers in a language&rsquo;s syntax. The operations I propose have been implemented in a <a href="http://gkz.github.com/LiveScript/">fork</a> of LiveScript, and used to great effect in several programs compiled with the fork.</p>

<p>The three symbols are</p>

<ul>
<li><code>:&gt;</code> Observe</li>
<li><code>-:&gt;</code> Unobserve</li>
<li><code>&lt;:</code> Trigger</li>
</ul>


<p>Each is a binary operation, taking on its left hand side a reference to some event, and on its right hand side either a function reference (for observe and unobserve) or a value (for trigger). Events in this syntax are simply properties on an object. Specifically, the left hand side can be a reference to any object, with the right-most property being the property and its container being the scope of the event. In practice:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>source = {}
</span><span class='line'>pass = false
</span><span class='line'>source :&gt; !(e) -&gt; pass := e
</span><span class='line'>source &lt;: true
</span><span class='line'>ok pass</span></code></pre></td></tr></table></div></figure>


<p>Here, <code>source</code> itself is the event. It has a single observer, which sets the global value of <code>pass</code> to the value that <code>source</code> was triggered with. Another example:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/* "Observers and Advisors trigger in correct deep context" */
</span><span class='line'>source = {}
</span><span class='line'>source.child = new -&gt;
</span><span class='line'>    @pass = 0
</span><span class='line'>    this
</span><span class='line'>
</span><span class='line'>add = !-&gt; @pass++
</span><span class='line'>source.child.event :&gt; add
</span><span class='line'>source.child.event &lt;: {}
</span><span class='line'>equal source.child.pass, 1</span></code></pre></td></tr></table></div></figure>


<p>Here, the object <code>source</code> has a single <code>child</code> with some <code>event</code>. When <code>event</code> is triggered, the observers are called with <code>this</code> bound to <code>source.child</code>, one level up from the event property.</p>

<p>Having these operators is a huge boon in writing event-driven programs. Not only does the codified syntax mean less typing, it provides a clear visual symbol for the concept of observing and triggering a variable. The actual implementation of the eventing is abstracted behind whatever event library the compiler chooses to delegate to. In my original implementation, the event listeners are attached to an array on the event itself, but another library could make the event property a function, a la jQuery, or register it in a private list of event sources, a la string-keyed pub/sub libraries.</p>

<p>My branch is available at <a href="http://github.com/DavidSouther/LiveScript">github.com/DavidSouther/LiveScript</a>. I intend to rewrite the eventing library used in two places. First, it should compile to a known method signature, with options on whether to include the function definition in the compiled scope. This will allow the eventing implementation to decouple from the compiler. Second, I would like to rework the implementation to detect if the event source is a function. This will allow the syntax to handle jQuery events natively.</p>

<p>I would ask <a href="https://github.com/gkz">gkz</a> and other users of LiveScript to consider this approach to an eventing syntax.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2012/08/31/election-2012-referendum-on-war/">Election 2012: Referendum on War</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-08-31T14:06:52-04:00" pubdate data-updated="true">Aug 31<span>st</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>All domestic policies will be for nothing if <a href="http://www.nytimes.com/2012/08/31/world/middleeast/report-on-iran-nuclear-work-puts-israel-in-a-box.html">Israel starts a war with Iran</a>.</p>

<p>The Economy is on everyone&rsquo;s mind, but the economy&rsquo;s not going to change overnight (so says Ryan, and I can agree on that point). The Environment is in serious danger of long-term damage that will make it materially more difficult for us as a species to prosper. Our Education system has many calling for a complete overhaul, but that will take years before our best and brightest children are able to make positive changes from such changes.</p>

<p>These are all long-term issues which are critical to building a bright future, and require serious thought in the mid-term.</p>

<p>These will be for nothing if Israel attacks Iran.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2012/08/31/election-2012-referendum-on-war/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2012/07/27/salmon-bake/">Salmon Bake</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-07-27T14:00:05-04:00" pubdate data-updated="true">Jul 27<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Fresh fish feels fantastically filling. This salmon bake is great year round, but an especially nice light summer dish.</p>

<ul>
<li>Salmon Fillets</li>
<li>1 Bell Pepper</li>
<li>half-dozen spears asparagus</li>
<li>4 medium red potatoes</li>
<li>Olive Oil</li>
<li>Lemon juice</li>
</ul>


<p>Pre-heat oven to 350.</p>

<p>Cover your baking sheet with aluminum foil (makes cleanup much easier, just throw the foil away). Drizzle light oil over the baking sheet.</p>

<p>Scallop potatoes, slicing them between an eighth and a quarter inch, and place the slices on an oiled baking sheet. Add a light dash salt and splash of lemon juice.</p>

<p>Slice pepper. To slice a bell pepper, cut from the top, near the stem, radially down. Rip out the seeds, throw out the stem, and keep slicing along the length of the bell until you have the thickness you want. Alternate pepper slices and asparagus spears in a layer on top of the potatoes. Add a light dash of salt and splash of lemon juice.</p>

<p>Place salmon fillet skin-down on the veggies, and add a splash of lemon juice.</p>

<p>Bake 15 minutes, or until salmon is nice and white.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2012/07/25/spaghetti/">Spaghetti</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-07-25T14:00:50-04:00" pubdate data-updated="true">Jul 25<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The quickest Italian dish ever. If you can&rsquo;t cook this, you shouldn&rsquo;t cook. (Actually, you should try it a few more times and figure out how to cook.) If you can&rsquo;t make this tasty, try a couple more times.</p>

<ul>
<li>Spaghetti noodles</li>
<li>1 lbs ground beef</li>
<li>1 can Classico spaghetti sauce</li>
<li>Salt</li>
<li>Olive Oil</li>
</ul>


<p>You&rsquo;re probably cooking your pasta wrong. Don&rsquo;t add pasta to boiling water. There&rsquo;s a weird reaction the outer pasta has that makes it sticky when you do that (and no, oil doesn&rsquo;t help much). Instead, put your dry pasta in a pan, cover with cold water (maybe a &frac14; inch above the pasta), and then turn on the heat. This lets the pasta get all wet and cooked before it starts to get soggy and clump. Add a dash of oil to keep the water from foaming and boiling over. You know now how to cook awesome pasta, of any kind. The only difference is thicker pastas will take longer.</p>

<p>For the sauce, brown the beef. Put a bit of oil in the pan, let it get nice and hot, add the beef, stir until well cooked. Again, don&rsquo;t fuck around with ground beef. Add the sauce, and let it simmer until hot. Depending on the noodles, it should be just the right temperature when the noodles finish.</p>

<h3>Alternatives</h3>

<ol>
<li><p> Different pastas. There are so many friggin pastas. Use the same cold water on top approach, and they&rsquo;ll come out well every time. Except rice noodles, I still can&rsquo;t figure out how to cook those fuckers.</p></li>
<li><p> Make your own sauce! (Guest post, coming soon!) There are probably as many sauce options than there are noodle options, so this is another great place to play around. Even with just the store-bought sauces, try adding different things to your beef when you fry it. I personally like diced onions, bell peppers, and olives.</p></li>
</ol>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2013/10/30/testing-its-hard-just-do-it/">Testing. It&#8217;s Hard. Just Do It!</a>
      </li>
    
      <li class="post">
        <a href="/2013/04/25/sitting-at-home/">Sitting at Home, Listening to Beethoven, Thinking of Maenee</a>
      </li>
    
      <li class="post">
        <a href="/2013/03/18/national-gallery-west-building/">National Gallery, West Building</a>
      </li>
    
      <li class="post">
        <a href="/2013/03/14/7th-ave-between-the-square-and-the-park/">7th Ave Between the Square and the Park</a>
      </li>
    
      <li class="post">
        <a href="/2013/02/25/readable-d3/">Readable D3</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/DavidSouther">@DavidSouther</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'DavidSouther',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/davidsouther?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - David Souther <davidsouther@gmail.com> -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
